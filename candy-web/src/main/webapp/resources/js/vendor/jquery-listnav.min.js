!function(g){g.fn.listnav=function(e){var C=g.extend({},g.fn.listnav.defaults,e),m=["_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","-"],N=!1,p="";return p=null!==document.ontouchstart?"click":"touchend click",C.prefixes=g.map(C.prefixes,function(e){return e.toLowerCase()}),this.each(function(){var l,s,i,n,a,o,e=this.id,r=g(this),d={},c=0,u=!0,v="";function h(e,t,l){/\W/.test(e)&&(e="-"),isNaN(e)||(e="_"),t.addClass("ln-"+e),void 0===d[e]&&(d[e]=0),d[e]++,l||c++}function f(e){return g(e).hasClass("all")?C.dontCount?c-r.find(C.dontCount).length:c:(e=".ln-"+g(e).attr("class").split(" ")[0],void 0!==(o=C.dontCount?r.find(e).not(C.dontCount).length:r.find(e).length)?o:0)}g("#"+e+"-nav").length||g('<div id="'+e+'-nav" class="listNav"/>').insertBefore(r),l=g("#"+e+"-nav"),function(){if(l.append(function(){for(var e=[],t=1;t<m.length;t++)0===e.length&&e.push('<a class="all" href="#">'+C.allText+'</a><a class="_" href="#">0-9</a>'),e.push('<a class="'+m[t]+'" href="#">'+("-"===m[t]?"...":m[t].toUpperCase())+"</a>");return'<div class="ln-letters">'+e.join("")+"</div>"+(C.showCounts?'<div class="ln-letter-count listNavHide">0</div>':"")}()),s=g(".ln-letters",l).slice(0,1),C.showCounts&&(i=g(".ln-letter-count",l).slice(0,1)),function(){var i,n,s=0<C.prefixes.length,a=0<C.filterSelector.length;g(r).children().each(function(){if(n=g(this),""!==(i=a?g.trim(n.find(C.filterSelector).text()).toLowerCase():g.trim(n.text()).toLowerCase())){if(s){var e=g.map(C.prefixes,function(e){return e.indexOf(" ")<=0?e+" ":e}),t=g.grep(e,function(e){return 0===i.indexOf(e)});if(0<t.length){var l=i.toLowerCase().split(t[0])[1];return void h(null!==l?g.trim(l).charAt(0):i.charAt(0),n,!0)}}h(i.charAt(0),n)}})}(),r.append('<li class="ln-no-match listNavHide">'+C.noMatchText+"</li>"),C.showCounts&&(l.mouseover(function(){!function(){var e=i.outerHeight();i.css({top:g("a:first",l).slice(0,1).position().top-e})}()}),g(".ln-letters a",l).mouseover(function(){n=g(this).position().left,a=g(this).outerWidth()+"px",o=f(this),i.css({left:n,width:a}).text(o).addClass("letterCountShow").removeClass("listNavHide")}).mouseout(function(){i.addClass("listNavHide").removeClass("letterCountShow")})),g("a",s).on(p,function(e){e.preventDefault();var t=g(this),l=t.attr("class").split(" ")[0],i=r.children(".ln-no-match");if(C.initHidden&&r.children(".ln-init-hidden").remove(),v!==l){if(g("a.ln-selected",s).removeClass("ln-selected"),"all"===l)r.children().addClass("listNavShow").removeClass("listNavHide"),i.addClass("listNavHide").removeClass("listNavShow"),u=!0;else{u?(r.children().addClass("listNavHide").removeClass("listNavShow"),u=!1):""!==v&&r.children(".ln-"+v).addClass("listNavHide").removeClass("listNavShow");var n=f(this);0<n?(r.children(".ln-"+l).addClass("listNavShow").removeClass("listNavHide"),i.addClass("listNavHide").removeClass("listNavShow")):i.addClass("listNavShow").removeClass("listNavHide")}v=l,g.cookie&&null!==C.cookieName&&g.cookie(C.cookieName,l,{expires:999}),t.addClass("ln-selected"),t.blur(),N||null===C.onClick?N=!1:C.onClick(l)}void 0!==C.onAfterFilter&&C.onAfterFilter(l)}),C.flagDisabled&&function(){for(var e=0;e<m.length;e++)void 0===d[m[e]]&&g("."+m[e],s).addClass("ln-disabled")}(),C.includeAll||g(".all",s).remove(),C.includeNums||g("._",s).remove(),C.includeOther||g(".-",s).remove(),C.removeDisabled&&g(".ln-disabled",s).remove(),g(":last",s).addClass("ln-last"),g.cookie&&null!==C.cookieName){var e=g.cookie(C.cookieName);null!=e&&(C.initLetter=e)}if(""!==C.initLetter)N=!0,g("."+C.initLetter.toLowerCase(),s).slice(0,1).trigger("click");else if(C.initHidden)r.append('<li class="ln-init-hidden listNavHide">'+C.initHiddenText+"</li>"),r.children().addClass("listNavHide"),r.children(".ln-init-hidden").removeClass("listNavHide");else if(C.includeAll)g(".all",s).addClass("ln-selected");else for(var t=C.includeNums?0:1;t<m.length;t++)if(0<d[m[t]]){N=!0,g("."+m[t],s).slice(0,1).trigger("click");break}}()})},g.fn.listnav.defaults={initHidden:!1,initHiddenText:"Tap a letter above to view matching items",initLetter:"",includeAll:!0,allText:"All",includeOther:!1,includeNums:!0,flagDisabled:!0,removeDisabled:!1,noMatchText:"No matching entries",showCounts:!0,dontCount:"",cookieName:null,onClick:null,prefixes:[],filterSelector:"",onAfterFilter:null}}(jQuery);