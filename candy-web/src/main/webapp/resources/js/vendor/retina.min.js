!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.retinajs=e()}(this,function(){"use strict";var t="undefined"!=typeof window,r=Math.round(t&&window.devicePixelRatio||1),i=/(\.[A-z]{3,4}\/?(\?.*)?)$/,o=/url\(('|")?([^)'"]+)('|")?\)/i,e="[data-rjs]",u="data-rjs-processed";function n(t){return Array.prototype.slice.call(t)}function a(t,e){var n=t.nodeName.toLowerCase(),i=document.createElement("img");i.addEventListener("load",function(){"img"===n?function(t){return t.hasAttribute("data-no-resize")||(0===t.offsetWidth&&0===t.offsetHeight?(t.setAttribute("width",t.naturalWidth),t.setAttribute("height",t.naturalHeight)):(t.setAttribute("width",t.offsetWidth),t.setAttribute("height",t.offsetHeight))),t}(t).setAttribute("src",e):t.style.backgroundImage="url("+e+")"}),i.setAttribute("src",e),t.setAttribute(u,!0)}function d(t,e){var n=function(t){var e=parseInt(t,10);return r<e?r:e}(2<arguments.length&&void 0!==arguments[2]?arguments[2]:1);e&&1<n&&a(t,e.replace(i,"@"+n+"x$1"))}function f(t){(function(t){return t?"function"==typeof t.forEach?t:n(t):"undefined"!=typeof document?n(document.querySelectorAll(e)):[]})(t).forEach(function(t){if(!t.getAttribute(u)){var e="img"===t.nodeName.toLowerCase()?t.getAttribute("src"):function(t){return t.style.backgroundImage.replace(o,"$2")}(t),n=t.getAttribute("data-rjs"),i=!isNaN(parseInt(n,10));if(null===n)return;i?d(t,e,n):function(t,e,n){1<r&&a(t,n)}(t,0,n)}})}return t&&(window.addEventListener("load",function(){f()}),window.retinajs=f),f});